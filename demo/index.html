<!doctype html>
<meta charset="utf-8">
<title>demo</title>

<script src="../../webcomponentsjs/webcomponents-loader.js"></script>
<link rel="import" href="../../polymer/polymer-element.html">
<link rel="import" href="../../shadycss/apply-shim.html">
<link rel="import" href="../../polymer/lib/elements/custom-style.html">
<link rel="import" href="../../polymer/lib/utils/async.html">
<link rel="import" href="../../polymer/lib/utils/unresolved.html">
<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../paper-styles/paper-styles.html">
<link rel="import" href="../../paper-styles/paper-styles-classes.html">

<link rel="import" href="../../iron-a11y-keys/iron-a11y-keys.html">
<link rel="import" href="../../iron-fit-behavior/iron-fit-behavior.html">
<link rel="import" href="../../iron-overlay-behavior/iron-overlay-behavior.html">
<link rel="import" href="../../iron-pages/iron-pages.html">
<link rel="import" href="../../paper-tabs/paper-tabs.html">
<link rel="import" href="../../paper-tabs/paper-tab.html">

<body unresolved>
  <custom-style>
    <style>
      body {
        @apply --paper-font-common-base;
        background-color: var(--paper-grey-200);
        margin: 0;
      }

      body {
        transition: opacity ease-in 0.2s;
      }

      body[unresolved] {
        opacity: 0;
        display: block;
        overflow: hidden;
        position: relative;
      }
    </style>
  </custom-style>

  <demo-element>demo-element not upgraded</demo-element>
</body>

<dom-module id="demo-element">
  <template>
    <style>
      :host {
        display: block;
        background: white;
        width: 66%;
        height: 33%;
        min-height: 400px;
        opacity: 0.66;
        transition: opacity ease-in 0.2s;
        @apply --shadow-elevation-4dp;
        overflow: hidden;
      }

      #content {
        padding: 0;
      }

      #pages {
        padding: 20px;
      }

      paper-tabs {
        margin: 0 -16px;
        --paper-tabs-selection-bar-color: var(--paper-light-blue-500);
        border-bottom: 1px solid var(--divider-color, #000);
      }

      paper-tab {
        --paper-tab-ink: var(--paper-light-blue-500);
      }
    </style>

    <iron-a11y-keys
      id="keys"
      target="[[keysTarget]]"
      keys="a"
      on-keys-pressed="_onKey">
    </iron-a11y-keys>

    <div id="content">
      <paper-tabs id="tabs" selected="{{selectedPage}}" fit-container>
        <paper-tab>app pages</paper-tab>
        <paper-tab>data controllers</paper-tab>
        <paper-tab>element loggers</paper-tab>
        <paper-tab>worker queues</paper-tab>
      </paper-tabs>

      <iron-pages id="pages" selected="[[selectedPage]]">
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
      </iron-pages>
    </div>
  </template>

  <script>
    class DemoElement extends Polymer.mixinBehaviors(
      [Polymer.IronOverlayBehavior], Polymer.Element) {

      static get is() {
        return "demo-element"
      }

      static get properties() {
        return {
          selectedPage: {
            type: Number,
            value: () => 0
          },

          keysTarget: {
            type: Object,
            value: () => window
          }
        }
      }

      ready() {
        super.ready()
        this._log("ready")
      }

      connectedCallback() {
        super.connectedCallback()
        this._log("connected", this.__data)

        this.keysTarget = window
        this.positionTarget = window
        this.verticalAlign = "bottom"
        this.horizontalAlign = "center"
        this.position()
        this.open()
      }

      _onKey() {
        this._log("toggle open")
        this.toggle()
      }

      _timeout(delayMillis) {
        return Polymer.Async.timeOut.after(delayMillis)
      }

      _log(...messages) {
        console.log(`[${this.localName}]`, ...messages)
      }
    }

    window.customElements.define(DemoElement.is, DemoElement)
  </script>
</dom-module>
